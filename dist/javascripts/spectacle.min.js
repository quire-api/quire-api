var stCurrentUser="curusr",isUser=!1;function _showHeaderIcon(){$("#header-icons").removeClass("hide")}function _updateLoginUser(t){var e=null!=getLocalStorage("inCgf")?aws2quire:identity,i=$(".t-user"),n=t.id,s=t.name,a=t.initials,e=e(t.image),t=t.iconColor,e=(isUser=!0,i.find(".dropdown-header").text(s),i.find(".user-icon-wrapper").append(e?$('<img class="img-icon x30 circle" src="'+e+'" alt="'+s+'">'):$('<div class="img-icon x30 circle bg iconc-'+t+'">'+a+"</div>")),i.find(".icon-user-o").parent().attr("href","/u/"+n),$("#header-wrapper").addClass("qr-collapse-navbar-768"),$("li.login").remove(),$(".workspace").removeClass("hide"),i.removeClass("hide"),window.notification);e&&($(".t-notification").removeClass("hide"),e.init()),_showHeaderIcon()}function _updateNonLoginUser(){$("#header-wrapper").addClass("qr-collapse-navbar-768"),$("li.workspace, li.t-notification, li.t-user").remove(),$(".login").removeClass("hide"),_showHeaderIcon()}window.sendQS=function(t,e,i){var n=$("body").data("qs")||"qs";return $.ajax({type:"POST",url:"/"+n,data:JSON.stringify(t),contentType:"application/json;charset=UTF-8"}).done(e).fail(function(t){i?i(t):(t=netErrorMsg(t))&&showAlert($("#body"),t,"alert-danger")})};var s3AwsUrl="https://quire.s3.amazonaws.com",quireS3Prefix="/quis3";function isAwsS3Path(t){return t&&(t.startsWith(s3AwsUrl+"/")||t==s3AwsUrl)}function aws2quire(t){return isAwsS3Path(t)?quireS3Prefix+t.substring(s3AwsUrl.length):t}function identity(t){return t}function getLocalStorage(t,e){try{var i=localStorage[t];return null!=i&&0!=e?JSON.parse(i):i}catch(t){}}function Traverse(t,e){this.$element=t,this.options=$.extend({},Traverse.defaults,this.$element.data(),e),this._init()}$(function(){var i,n,s,a,t=$("#sidebar");t.length&&($("#docs"),new Traverse(i=t.find("nav"),{threshold:10,barOffset:t.position().top}),i.on("update.traverse",function(t,e){i.find("section").removeClass("expand");e=e.parents("section:first");e.length&&e.addClass("expand")}),n=$(".drawer-layout"),s=n.find(".drawer"),a=function(){return s.addClass("sliding"),s.removeClass("slide-right slide-left"),s.find(".drawer-overlay").remove(),n.removeClass("drawer-open drawer-slide-left-large"),!1},s.on("transitionend webkitTransitionEnd oTransitionEnd",function(){s.removeClass("sliding")}),n.find("[data-drawer-slide]").click(function(t){var e=$(this).data("drawer-slide"),e=(n.addClass("drawer-slide-right-large"),s.addClass("slide-"+e),s.addClass("sliding"),$('<a href="#" class="drawer-overlay"></a>'));return s.append(e),e.click(a),!1}),n.find("[data-drawer-close]").click(a)),sendQS([stCurrentUser,null],function(t){t?_updateLoginUser(t):_updateNonLoginUser()},function(){_updateNonLoginUser(),_showHeaderIcon()}),$(document).find("h1,h2,h3").each(function(){var t=$(this),e=t.attr("id");e&&t.append(`<a href="#${e}" class="i-btn x28 icon-link copy-link-btn"></a>`)}),$(".copy-link-btn").on("click",function(t){setTimeout(()=>navigator.clipboard.writeText(window.location.href),100)})}),Traverse.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Traverse.prototype._init=function(){var t=this.$element[0].id;this.$targets=$(".introduction .doc-copy > h1, [data-traverse-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":t,"data-scroll":t,id:t}),this.$active=$(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()},Traverse.prototype.calcPoints=function(){var i=this,t=document.body,e=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,e.clientHeight)),this.docHeight=Math.round(Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)),this.$targets.each(function(){var t=$(this),e=t.offset().top;t.targetPoint=e,i.points.push(e)})},Traverse.prototype._events=function(){var i=this,e=$("html, body"),n={duration:i.options.animationDuration,easing:i.options.animationEasing};$(window).one("load",function(){var e;i.calcPoints(),i._updateActive(),$(this).resize(function(t){i.reflow()}).scroll(function(t){e&&clearTimeout(e),e=setTimeout(function(){i._updateActive()},100)})}),this.$element.on("click",'a[href^="#"]',function(t){t.preventDefault();t=this.getAttribute("href").replace(/\./g,"\\."),t=$(t).offset().top-i.options.barOffset;e.stop(!0).animate({scrollTop:t},n)})},Traverse.prototype.reflow=function(){this.calcPoints(),this._updateActive()},Traverse.prototype._updateActive=function(){var i,n,t,s=parseInt(window.pageYOffset,10),e=(a=s+this.winHeight===this.docHeight?this.points.length-1:!(s<this.points[0])&&(i=this.scrollPos<s,(a=(n=this).points.filter(function(t,e){return i?t<=s+n.options.barOffset+n.options.threshold:t-(n.options.barOffset+n.options.threshold)<=s})).length)?a.length-1:0,this.$active),a=this.$links.eq(a);this.$active.removeClass(this.options.activeClass),this.$active=a.addClass(this.options.activeClass),this.options.deepLinking&&(t=this.$active[0].getAttribute("href"),window.history.pushState?window.history.pushState(null,null,t):window.location.hash=t),this.scrollPos=s,e[0]!==a[0]&&this.$element.trigger("update.traverse",[this.$active])};