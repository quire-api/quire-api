var stCurrentUser="curusr",isUser=!1;function _showHeaderIcon(){$("#header-icons").removeClass("hide")}function _updateLoginUser(t){var e=null!=getLocalStorage("inCgf")?aws2quire:identity,i=$(".t-user"),s=t.id,n=t.name,a=t.initials,e=e(t.image),t=t.iconColor;isUser=!0,i.find(".dropdown-header").text(n),i.find(".user-icon-wrapper").append(e?$('<img class="img-icon x30 circle" src="'+e+'" alt="'+n+'">'):$('<div class="img-icon x30 circle bg iconc-'+t+'">'+a+"</div>")),i.find(".icon-user-o").parent().attr("href","/u/"+s),$("#header-wrapper").addClass("qr-collapse-navbar-768"),$("li.login").remove(),$(".workspace").removeClass("hide"),i.removeClass("hide");i=window.notification;i&&($(".t-notification").removeClass("hide"),i.init()),_showHeaderIcon()}function _updateNonLoginUser(){$("#header-wrapper").addClass("qr-collapse-navbar-768"),$("li.workspace, li.t-notification, li.t-user").remove(),$(".login").removeClass("hide"),_showHeaderIcon()}window.sendQS=function(t,e,i){var s=$("body").data("qs")||"qs";return $.ajax({type:"POST",url:"/"+s,data:JSON.stringify(t),contentType:"application/json;charset=UTF-8"}).done(e).fail(function(t){i?i(t):(t=netErrorMsg(t))&&showAlert($("#body"),t,"alert-danger")})};var s3AwsUrl="https://quire.s3.amazonaws.com",quireS3Prefix="/quis3";function isAwsS3Path(t){return t&&(t.startsWith(s3AwsUrl+"/")||t==s3AwsUrl)}function aws2quire(t){return isAwsS3Path(t)?quireS3Prefix+t.substring(s3AwsUrl.length):t}function identity(t){return t}function getLocalStorage(t,e){try{var i=localStorage[t];return null!=i&&0!=e?JSON.parse(i):i}catch(t){}}function Traverse(t,e){this.$element=t,this.options=$.extend({},Traverse.defaults,this.$element.data(),e),this._init()}$(function(){var i,s,n,a,t=$("#sidebar");t.length&&($("#docs"),new Traverse(i=t.find("nav"),{threshold:10,barOffset:t.position().top}),i.on("update.traverse",function(t,e){i.find("section").removeClass("expand");e=e.parents("section:first");e.length&&e.addClass("expand")}),s=$(".drawer-layout"),n=s.find(".drawer"),a=function(){return n.addClass("sliding"),n.removeClass("slide-right slide-left"),n.find(".drawer-overlay").remove(),s.removeClass("drawer-open drawer-slide-left-large"),!1},n.on("transitionend webkitTransitionEnd oTransitionEnd",function(){n.removeClass("sliding")}),s.find("[data-drawer-slide]").click(function(t){var e=$(this).data("drawer-slide");s.addClass("drawer-slide-right-large"),n.addClass("slide-"+e),n.addClass("sliding");e=$('<a href="#" class="drawer-overlay"></a>');return n.append(e),e.click(a),!1}),s.find("[data-drawer-close]").click(a)),sendQS([stCurrentUser,null],function(t){t?_updateLoginUser(t):_updateNonLoginUser()},function(){_updateNonLoginUser(),_showHeaderIcon()})}),Traverse.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Traverse.prototype._init=function(){var t=this.$element[0].id;this.$targets=$(".introduction .doc-copy > h1, [data-traverse-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":t,"data-scroll":t,id:t}),this.$active=$(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()},Traverse.prototype.calcPoints=function(){var i=this,t=document.body,e=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,e.clientHeight)),this.docHeight=Math.round(Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)),this.$targets.each(function(){var t=$(this),e=t.offset().top;t.targetPoint=e,i.points.push(e)})},Traverse.prototype._events=function(){var i=this,e=$("html, body"),s={duration:i.options.animationDuration,easing:i.options.animationEasing};$(window).one("load",function(){var e;i.calcPoints(),i._updateActive(),$(this).resize(function(t){i.reflow()}).scroll(function(t){e&&clearTimeout(e),e=setTimeout(function(){i._updateActive()},100)})}),this.$element.on("click",'a[href^="#"]',function(t){t.preventDefault();t=this.getAttribute("href").replace(/\./g,"\\."),t=$(t).offset().top-i.options.barOffset;e.stop(!0).animate({scrollTop:t},s)})},Traverse.prototype.reflow=function(){this.calcPoints(),this._updateActive()},Traverse.prototype._updateActive=function(){var i,s,n=parseInt(window.pageYOffset,10);t=n+this.winHeight===this.docHeight?this.points.length-1:n<this.points[0]?0:(i=this.scrollPos<n,(a=(s=this).points.filter(function(t,e){return i?t<=n+s.options.barOffset+s.options.threshold:t-(s.options.barOffset+s.options.threshold)<=n})).length?a.length-1:0);var t,e=this.$active,a=this.$links.eq(t);this.$active.removeClass(this.options.activeClass),this.$active=a.addClass(this.options.activeClass),this.options.deepLinking&&(t=this.$active[0].getAttribute("href"),window.history.pushState?window.history.pushState(null,null,t):window.location.hash=t),this.scrollPos=n,e[0]!==a[0]&&this.$element.trigger("update.traverse",[this.$active])};