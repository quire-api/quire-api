var stCurrentUser="curusr",isUser=!1;function _showHeaderIcon(){$("#header-icons").removeClass("hide")}function _updateLoginUser(e){var t=null!=getLocalStorage("inCgf")?aws2quire:identity,i=$(".t-user"),s=e.id,n=e.name,a=e.initials,t=t(e.image),e=e.iconColor;isUser=!0,i.find(".dropdown-header").text(n),i.find(".user-icon-wrapper").append(""!=t?$('<img class="img-icon x30 circle" src="'+t+'" alt="'+n+'">'):$('<div class="img-icon x30 circle bg iconc-'+e+'">'+a+"</div>")),i.find(".icon-user-o").parent().attr("href","/u/"+s),$("#header-wrapper").addClass("qr-collapse-navbar-768"),$("li.login").remove(),$(".workspace").removeClass("hide"),i.removeClass("hide"),_showHeaderIcon()}function _updateNonLoginUser(){$("#header-wrapper").addClass("qr-collapse-navbar"),$("li.workspace, li.t-user").remove(),$(".login").removeClass("hide"),_showHeaderIcon()}window.sendQS=function(e,t,i){var s=$("body").data("qs")||"qs";return $.ajax({type:"POST",url:"/"+s,data:JSON.stringify(e),contentType:"application/json;charset=UTF-8"}).done(t).fail(function(e){i?i(e):(e=netErrorMsg(e))&&showAlert($("#body"),e,"alert-danger")})};var s3AwsUrl="https://quire.s3.amazonaws.com",quireS3Prefix="/quis3";function isAwsS3Path(e){return e&&(e.startsWith(s3AwsUrl+"/")||e==s3AwsUrl)}function aws2quire(e){return isAwsS3Path(e)?quireS3Prefix+e.substring(s3AwsUrl.length):e}function identity(e){return e}function getLocalStorage(e,t){try{var i=localStorage[e];return null!=i&&0!=t?JSON.parse(i):i}catch(e){}}function initHeaderMenuToggle(){var t=$("#header .navbar-collapse");$("#menu-toggle").click(function(){var e=t.hasClass("in");t[e?"removeClass":"addClass"]("in"),$(this)[e?"removeClass":"addClass"]("open"),$(".qr-collapse-navbar,.qr-collapse-navbar-768")[e?"removeClass":"addClass"]("navbar-fixed-bottom")})}function Traverse(e,t){this.$element=e,this.options=$.extend({},Traverse.defaults,this.$element.data(),t),this._init()}$(function(){initHeaderMenuToggle();var i,s,n,a,e=$("#sidebar");e.length&&($("#docs"),new Traverse(i=e.find("nav"),{threshold:10,barOffset:e.position().top}),i.on("update.traverse",function(e,t){i.find("section").removeClass("expand");t=t.parents("section:first");t.length&&t.addClass("expand")}),s=$(".drawer-layout"),n=s.find(".drawer"),a=function(){return n.addClass("sliding"),n.removeClass("slide-right slide-left"),n.find(".drawer-overlay").remove(),s.removeClass("drawer-open drawer-slide-left-large"),!1},n.on("transitionend webkitTransitionEnd oTransitionEnd",function(){n.removeClass("sliding")}),s.find("[data-drawer-slide]").click(function(e){var t=$(this).data("drawer-slide"),t=(s.addClass("drawer-slide-right-large"),n.addClass("slide-"+t),n.addClass("sliding"),$('<a href="#" class="drawer-overlay"></a>'));return n.append(t),t.click(a),!1}),s.find("[data-drawer-close]").click(a)),sendQS([stCurrentUser,null],function(e){e?_updateLoginUser(e):_updateNonLoginUser()},function(){_updateNonLoginUser(),_showHeaderIcon()})}),Traverse.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Traverse.prototype._init=function(){var e=this.$element[0].id;this.$targets=$(".introduction .doc-copy > h1, [data-traverse-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":e,"data-scroll":e,id:e}),this.$active=$(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()},Traverse.prototype.calcPoints=function(){var i=this,e=document.body,t=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,t.clientHeight)),this.docHeight=Math.round(Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)),this.$targets.each(function(){var e=$(this),t=e.offset().top;e.targetPoint=t,i.points.push(t)})},Traverse.prototype._events=function(){var i=this,t=$("html, body"),s={duration:i.options.animationDuration,easing:i.options.animationEasing};$(window).one("load",function(){var t;i.calcPoints(),i._updateActive(),$(this).resize(function(e){i.reflow()}).scroll(function(e){t&&clearTimeout(t),t=setTimeout(function(){i._updateActive()},100)})}),this.$element.on("click",'a[href^="#"]',function(e){e.preventDefault();e=this.getAttribute("href").replace(/\./g,"\\."),e=$(e).offset().top-i.options.barOffset;t.stop(!0).animate({scrollTop:e},s)})},Traverse.prototype.reflow=function(){this.calcPoints(),this._updateActive()},Traverse.prototype._updateActive=function(){var i,s,e,n=parseInt(window.pageYOffset,10),t=(a=n+this.winHeight===this.docHeight?this.points.length-1:n<this.points[0]?0:(i=this.scrollPos<n,(a=(s=this).points.filter(function(e,t){return i?e<=n+s.options.barOffset+s.options.threshold:e-(s.options.barOffset+s.options.threshold)<=n})).length?a.length-1:0),this.$active),a=this.$links.eq(a);this.$active.removeClass(this.options.activeClass),this.$active=a.addClass(this.options.activeClass),this.options.deepLinking&&(e=this.$active[0].getAttribute("href"),window.history.pushState?window.history.pushState(null,null,e):window.location.hash=e),this.scrollPos=n,t[0]!==a[0]&&this.$element.trigger("update.traverse",[this.$active])};